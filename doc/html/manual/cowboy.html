<!DOCTYPE html>
<html>
<head>
<title>cowboy</title>
<meta charset="utf8">
<style>
div.layout{width:800px;margin:0 auto;}
</style>
<link rel="stylesheet" href="slides.css" type="text/css">
</head>
<body>
<div class="layout">
<h1>cowboy</h1>

<p>The <code>cowboy</code> module provides convenience functions for manipulating Ranch listeners.</p>

<h2>Types</h2>

<h3>http_headers() = [{binary(), iodata()}]</h3>

<p>HTTP headers as a list of key/values.</p>

<h3>http_status() = non_neg_integer() | binary()</h3>

<p>HTTP status.</p>

<p>A binary status can be used to set a custom message.</p>

<h3>http_version() = 'HTTP/1.1' | 'HTTP/1.0'</h3>

<p>HTTP version.</p>

<h3>onrequest_fun() = fun((cowboy_req:req()) -> cowboy_req:req())</h3>

<p>Fun called immediately after receiving a request.</p>

<p>It can perform any operation on the Req object, including reading the request body or replying. If a reply is sent, the processing of the request ends here, before any middleware is executed.</p>

<h3>onresponse_fun() = fun((http_status(), http_headers(), iodata(), cowboy_req:req()) -> cowboy_req:req())</h3>

<p>Fun called immediately before sending the response.</p>

<p>It can perform any operation on the Req object, including reading the request body or replying. If a reply is sent, it overrides the reply initially sent. The callback will not be called again for the new reply.</p>

<h2>Exports</h2>

<h3>start_http(Ref, NbAcceptors, TransOpts, ProtoOpts) -> {ok, pid()}</h3>

<p>Types:</p>

<ul>
<li>Ref = ranch:ref()</li>
<li>NbAcceptors = non_neg_integer()</li>
<li>TransOpts = ranch_tcp:opts()</li>
<li>ProtoOpts = cowboy_protocol:opts()</li>
</ul>

<p>Start listening for HTTP connections. Returns the pid for this listener's supervisor.</p>

<h3>start_https(Ref, NbAcceptors, TransOpts, ProtoOpts) -> {ok, pid()}</h3>

<p>Types:</p>

<ul>
<li>Ref = ranch:ref()</li>
<li>NbAcceptors = non_neg_integer()</li>
<li>TransOpts = ranch_ssl:opts()</li>
<li>ProtoOpts = cowboy_protocol:opts()</li>
</ul>

<p>Start listening for HTTPS connections. Returns the pid for this listener's supervisor.</p>

<h3>start_spdy(Ref, NbAcceptors, TransOpts, ProtoOpts) -> {ok, pid()}</h3>

<p>Types:</p>

<ul>
<li>Ref = ranch:ref()</li>
<li>NbAcceptors = non_neg_integer()</li>
<li>TransOpts = ranch_ssl:opts()</li>
<li>ProtoOpts = cowboy_spdy:opts()</li>
</ul>

<p>Start listening for SPDY connections. Returns the pid for this listener's supervisor.</p>

<h3>stop_listener(Ref) -> ok | {error, not_found}</h3>

<p>Types:</p>

<ul>
<li>Ref = ranch:ref()</li>
</ul>

<p>Stop a previously started listener.</p>

<h3>set_env(Ref, Name, Value) -> ok</h3>

<p>Types:</p>

<ul>
<li>Ref = ranch:ref()</li>
<li>Name = atom()</li>
<li>Value = any()</li>
</ul>

<p>Set or update an environment value for an already running listener. This will take effect on all subsequent connections.</p>

<h2>See also</h2>

<p>The <a href="https://github.com/221V/ranch_1.0.0/tree/master/guide">Ranch guide</a> provides detailed information about how listeners work.</p>
</div>
<script>SyntaxHighlighter.all();</script>
</body>
</html>
